# TFT卡牌统计系统 - GUI界面使用说明

## 概述

TFT卡牌统计系统现在提供了完整的图形用户界面，使用Tkinter技术栈实现，具有现代化的仪表板风格设计。

## 功能特性

### 1. 模板匹配控制
- **开始/停止监控**: 控制系统的运行状态
- **手动触发**: 手动执行一次模板匹配
- **参数设置**: 实时调整匹配阈值、显示器选择、OCR开关等

### 2. 实时显示匹配结果
- **数据表格**: 2行10列的实时匹配结果表格
- **自动更新**: 实时显示最新的匹配数据
- **数据清理**: 支持清空表格功能

### 3. 统计数据显示和图表
- **饼图**: 左侧显示卡牌费用分布
- **折线图**: 右侧显示匹配趋势
- **实时更新**: 图表数据自动更新

### 4. 数据库管理
- **自动记录**: 所有匹配结果自动保存到数据库
- **数据导出**: 支持CSV格式导出
- **会话管理**: 支持多会话数据管理

### 5. 设置配置
- **匹配阈值**: 0.5-1.0可调节
- **显示器选择**: 支持多显示器配置
- **OCR开关**: 可启用/禁用OCR功能

## 界面布局

```
┌─────────────────────────────────────────────────────────────┐
│                    TFT卡牌统计系统                          │
├─────────────────────────────────────────────────────────────┤
│ [开始监控] [手动触发] [保存记录] [分享数据]                │
│ 触发次数: 0  匹配阈值: [=====●=====]  显示器: [1] [✓]OCR  │
├─────────────────────────────────────────────────────────────┤
│ 实时匹配结果                                                │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 区域 │ 卡牌名称 │ 费用 │ 匹配分数 │ OCR数字 │ 时间    │ │
│ │  1   │ Aatrox  │  1   │  0.923   │         │ 14:30:15│ │
│ │  2   │ Garen   │  1   │  0.891   │         │ 14:30:15│ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 卡牌费用分布                    │ 匹配趋势                    │
│ ┌─────────────────────────────┐ │ ┌─────────────────────────┐ │
│ │                             │ │ │                         │ │
│ │        饼图区域              │ │ │      折线图区域          │ │
│ │                             │ │ │                         │ │
│ └─────────────────────────────┘ │ └─────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 运行日志                                                    │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ [14:30:15] 系统启动完成                                 │ │
│ │ [14:30:20] 开始监控...                                  │ │
│ │ [14:30:25] 手动触发 #1                                  │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

## 使用方法

### 启动方式

#### 方法1: 使用批处理文件（推荐）
```bash
# 双击运行
run_gui.bat
```

#### 方法2: 直接运行Python脚本
```bash
python gui_launcher.py
```

#### 方法3: 使用原始启动脚本
```bash
python run_gui.py
```

### 操作流程

1. **启动系统**
   - 运行启动脚本
   - 等待界面加载完成

2. **开始监控**
   - 点击"开始监控"按钮
   - 系统会创建新的数据库会话
   - 手动触发按钮变为可用状态

3. **执行匹配**
   - 点击"手动触发"按钮
   - 系统会自动截图并执行模板匹配
   - 结果会显示在表格中并更新图表

4. **查看统计**
   - 饼图显示费用分布
   - 折线图显示时间趋势
   - 表格显示详细匹配记录

5. **保存数据**
   - 点击"保存记录"导出CSV文件
   - 点击"分享数据"保存JSON配置

## 快捷键

- `Ctrl+S`: 保存记录
- `Ctrl+T`: 手动触发
- `Ctrl+L`: 清空日志
- `Ctrl+C`: 清空表格

## 系统要求

### 软件依赖
- Python 3.7+
- Tkinter (通常随Python安装)
- matplotlib
- opencv-python
- mss
- pynput
- pytesseract

### 安装依赖
```bash
pip install -r requirements.txt
```

### 硬件要求
- Windows 10/11
- 至少4GB RAM
- 支持多显示器的显卡

## 配置说明

### 匹配阈值
- **范围**: 0.5 - 1.0
- **默认值**: 0.85
- **说明**: 数值越高匹配越严格，误报率越低但可能漏检

### 显示器选择
- **范围**: 1-4
- **默认值**: 1 (主显示器)
- **说明**: 选择要监控的显示器

### OCR功能
- **启用**: 支持数字识别
- **禁用**: 仅使用模板匹配
- **说明**: 需要安装Tesseract OCR引擎

## 故障排除

### 常见问题

1. **GUI无法启动**
   - 检查Python版本 (需要3.7+)
   - 安装依赖包: `pip install -r requirements.txt`
   - 检查Tkinter是否可用

2. **模板匹配失败**
   - 检查tft_units目录是否存在
   - 调整匹配阈值
   - 确认显示器设置正确

3. **图表显示异常**
   - 检查matplotlib安装
   - 重启应用程序
   - 检查数据完整性

4. **OCR功能异常**
   - 安装Tesseract OCR
   - 检查环境变量设置
   - 在设置中禁用OCR功能

### 日志查看
- 所有操作都会记录在运行日志中
- 错误信息会显示具体的错误原因
- 支持日志清空和查看

## 技术支持

如果遇到问题，请：
1. 查看运行日志中的错误信息
2. 检查依赖包是否正确安装
3. 确认系统配置是否符合要求
4. 查看项目文档获取更多信息

## 更新日志

### v1.0.0
- 初始GUI版本发布
- 支持基本的模板匹配功能
- 实现实时数据显示和图表
- 提供完整的数据库管理功能
