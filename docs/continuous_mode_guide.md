# 持续监控模式使用指南

## 概述

持续监控模式允许程序在后台持续运行，通过快捷键触发截图和模板匹配操作，无需重复启动程序。

## 启动方式

### 方法1：命令行启动
```bash
python run.py --continuous
```

### 方法2：批处理文件启动
双击运行 `run_continuous.bat` 文件

### 方法3：带参数启动
```bash
# 自定义模板目录
python run.py --continuous --templates_dir my_templates

# 自定义匹配阈值
python run.py --continuous --threshold 0.7

# 显示可视化窗口
python run.py --continuous --show

# 自定义显示器
python run.py --continuous --monitor 2
```

## 快捷键说明

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| **D** | 触发截图和匹配 | 立即执行一次固定区域截图和模板匹配 |
| **Ctrl+F1** | 退出程序 | 安全退出持续监控模式 |

## 工作流程

1. **启动程序**：运行 `--continuous` 参数
2. **等待触发**：程序在后台运行，等待快捷键输入
3. **D触发**：按下D键触发一次完整的截图和匹配流程
4. **查看结果**：程序显示匹配结果，然后返回等待状态
5. **重复操作**：可以重复按D键进行多次匹配
6. **退出程序**：按Ctrl+F1安全退出

## 参数说明

### 基础参数
- `--continuous`：启用持续监控模式（必需）
- `--templates_dir`：模板目录路径（默认：tft_units）
- `--monitor`：显示器索引（默认：1，主显示器）
- `--threshold`：匹配阈值（默认：0.9）

### 可选参数
- `--show`：显示可视化窗口，包括匹配结果和边界框
- `--templates_dir`：指定自定义模板目录

## 使用场景

### 游戏中进行实时监控
1. 启动持续监控模式
2. 在游戏中切换到TFT界面
3. 按D键进行截图和识别
4. 查看识别结果
5. 继续游戏，需要时再次按D

### 批量数据收集
1. 启动持续监控模式
2. 在多个游戏对局中按D收集数据
3. 程序持续运行，无需重启
4. 完成后按Ctrl+F1退出

## 注意事项

1. **权限要求**：程序需要键盘监听权限，某些系统可能需要管理员权限
2. **焦点要求**：程序需要在后台运行，但系统需要允许键盘监听
3. **性能影响**：持续监控模式CPU占用很低，主要等待用户输入
4. **安全退出**：建议使用Ctrl+F1退出，避免强制关闭

## 故障排除

### 快捷键无响应
- 检查程序是否在后台运行
- 确认系统允许键盘监听
- 尝试以管理员权限运行

### 程序意外退出
- 检查是否有其他程序占用键盘监听
- 查看控制台错误信息
- 重新启动程序

## 示例输出

```
=== 启动持续监控模式 ===
=== 持续监控模式已启动 ===
快捷键说明:
  D     - 触发截图和模板匹配
  Ctrl+F1 - 退出程序
模板目录: tft_units
匹配阈值: 0.9
程序将持续运行，等待快捷键输入...

检测到 D 按键，触发截图和匹配...
=== 执行固定区域模板匹配 ===
使用模板目录: tft_units
匹配阈值: 0.9

--- 区域1 (645,1240,250,185) ---
区域1 匹配到的模板: Gangplank.png

--- 区域2 (914,1240,250,185) ---
区域2 未匹配到任何模板

=== 匹配结果总结 ===
区域1: Gangplank.png

等待下一次触发... (D: 截图匹配, Ctrl+F1: 退出)
```
